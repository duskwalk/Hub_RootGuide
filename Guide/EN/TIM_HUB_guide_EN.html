<!DOCTYPE html>
<html>
<head>
<title>TIM_HUB_guide_EN.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="root-tim-hub-dga4132-and-ansuel-gui---version-agthp-233">ROOT TIM HUB DGA4132 AND ANSUEL GUI - VERSION AGTHP 2.3.3</h1>
<p>This guide has been written to have a simple and immediate reference point in case you want to proceed with the enabling of the root user of the TIM HUB DGA4132 modem router (hereinafter &quot;router&quot;) and the subsequent installation of the Ansuel GUI. All the steps have been taken and adapted from the websites listed in the paragraph below, then grouped on this page and set up in the correct order.</p>
<p>This guide is available in the following formats:</p>
<ul>
<li>Markdown (<code>TIM_HUB_guide_IT.md</code>)</li>
<li>PDF (<code>TIM_HUB_guide_IT.pdf</code>)</li>
<li>HTML (<code>TIM_HUB_guide_IT.html</code>)</li>
</ul>
<h2 id="websites">WEBSITES</h2>
<ul>
<li><a href="https://hack-technicolor.readthedocs.io/en/stable/">Hacking Technicolor Gateways: Material for MkDocs</a></li>
<li><a href="https://www.ilpuntotecnico.com/forum/index.php?topic=81461.0">IlPuntoTecnico GUI Ansuel</a></li>
<li><a href="https://github.com/Ansuel/gui-dev-build-auto">GitHub GUI Ansuel</a></li>
<li><a href="https://github.com/mswhirl/autoflashgui">GitHub AutoFlashGUI</a></li>
<li><a href="https://winscp.net/eng/download.php">WinSCP</a></li>
</ul>
<h2 id="useful-files">USEFUL FILES</h2>
<p>The <code>autoflashgui-master_timhub.zip</code> file contains the <code>16.02.2018</code> version of the AutoFlashGUI tool developed by Mark Smith (mswhirl). Once extracted, inside the <em>autoflashgui-master/firmware</em> folder you can find the following files needed for this guide:</p>
<ul>
<li><code>AGTHP_1.0.3_CLOSED.rbi.torrent</code>: torrent file to start the download of the firmware version AGTHP 1.0.3 downloaded from the website &quot;Hacking Technicolor Gateways: Material for MkDocs&quot;. Move the downloaded file into the <em>autoflashgui-master/firmware</em> folder</li>
<li><code>AGTHP_2.3.3_CLOSED.rbi.torrent</code>: torrent file to start the download of the firmware version AGTHP 2.3.3 downloaded from the website &quot;Hacking Technicolor Gateways: Material for MkDocs&quot;. Move the downloaded file into the <em>autoflashgui-master/firmware</em> folder</li>
<li><code>GUI.tar.bz2</code>: stable version 9.6.65 of the Ansuel GUI downloaded from Ansuel's <code>gui-dev-build-auto</code> GitHub repository. Please check for new versions before proceeding</li>
</ul>
<hr>
<h2 id="guide---part-1">GUIDE - PART 1</h2>
<ul>
<li>Update the router to version 2.3.3 (you can do this using the &quot;TIM Modem&quot; smartphone app available for Android and iOS)</li>
<li>From the first <em>Gateway</em> tab in the web GUI, if necessary, backup configuration in <code>.bin</code> via the <em>Export</em> button. A file named &quot;config.bin&quot; will be downloaded</li>
<li>Reset the router via the <em>Reset</em> button</li>
<li>After reboot, login to the web page (<code>admin/admin</code>), don't change the password and activate the <em>Extended configuration</em> mode</li>
</ul>
<blockquote>
<p>WARNING: To enable the Extended Configuration it's necessary to click on a tab that appears ONLY at the first login immediately after a reset. If you log out of the web GUI or close the browser window, you will need to perform another router reset to trigger the Extended configuration prompt again. Furthermore, the router must NOT be connected to the Internet in any way: disconnect the RJ11 cable, the Ethernet cable in the WAN port or the FTTH connection.</p>
</blockquote>
<ul>
<li>To log in again in the GUI, the password is the <strong>ACCESS KEY</strong> on the label located at the base of the router (under the last barcode in the left column)</li>
<li>Enter the first <em>Gateway</em> tab and perform the downgrade to version 1.0.3 from the third tab. To do this, load the <code>AGTHP_1.0.3_CLOSED.rbi</code> file by clicking on <em>Choose file</em> and then on <em>Update</em> in the <em>Firmware update</em> section</li>
<li>After reboot, you won't be able to login. Reset router from the button on the back (hold for <strong>10-12 sec.</strong>)</li>
<li>After the second reboot, login to the web page (<code>admin/admin</code>) without changing the password</li>
<li>Run the <code>autoflashgui.exe</code> program inside <em>autoflashgui-master</em> folder</li>
</ul>
<h3 id="autoflashguiexe">AUTOFLASHGUI.EXE</h3>
<p>Set the following parameters with their respective values</p>
<ul>
<li>Load default: <em>Generic (Advanced DDNS)</em></li>
<li>Target IP: ip router</li>
<li>Username: user GUI web</li>
<li>Password: password GUI web</li>
<li><strong>DO NOT</strong> select <em>Firmware File Name</em> and <em>Flash firmware?</em></li>
<li>Check <em>Split the given command on semicolons [...]</em> if not already selected</li>
<li>Leave the other settings unchanged</li>
<li>Click on <em>Run</em></li>
<li>Wait for result on the shell</li>
<li>Close the program (it will no longer be necessary)</li>
<li>Connect with SSH to the router and try to authenticate with <code>root/root</code></li>
</ul>
<hr>
<h2 id="guide---part-2">GUIDE - PART 2</h2>
<ul>
<li>
<p>Enable the Serial Console Port from the router's root shell</p>
<ul>
<li><code>sed -i -e 's/#//' -e 's#askconsole:.*\$#askconsole:/bin/ash#' /etc/inittab</code></li>
</ul>
</li>
<li>
<p>Check the banks status</p>
<ul>
<li><code>find /proc/banktable -type f -print -exec cat {} ';' -exec echo ';'</code></li>
</ul>
</li>
<li>
<p>Take note of the following parameters</p>
<pre><code>  ...
  /proc/banktable/booted
  &lt;take note of this&gt;
  proc/banktable/active
  &lt;take note of this&gt;
  ...
</code></pre>
</li>
<li>
<p>To achieve our goal, the result of the previous command must become as follows</p>
<pre><code>  /proc/banktable/active
  bank_1
  /proc/banktable/activeversion
  Unknown
  /proc/banktable/booted
  bank_2
</code></pre>
</li>
<li>
<p>Then proceed to the next step to set <code>bank_1</code> as active and then delete it to always boot the <code>bank_2</code></p>
</li>
</ul>
<h3 id="script">SCRIPT</h3>
<ul>
<li>Create a script using <code>vim</code> with the following commands</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Ensure two banks match in sizes</span>
[ $(grep -c bank_ /proc/mtd) = 2 ] &amp;&amp; \
[ <span class="hljs-string">"<span class="hljs-variable">$(grep bank_1 /proc/mtd | cut -d' ' -f2)</span>"</span> = \
<span class="hljs-string">"<span class="hljs-variable">$(grep bank_2 /proc/mtd | cut -d' ' -f2)</span>"</span> ] &amp;&amp; {
<span class="hljs-comment"># Clone and verify firmware into bank_2 if applicable</span>
[ <span class="hljs-string">"<span class="hljs-variable">$(cat /proc/banktable/booted)</span>"</span> = <span class="hljs-string">"bank_1"</span> ] &amp;&amp; {
mtd -e bank_2 write /dev/$(grep bank_1 /proc/mtd | cut -d: -f1) bank_2 &amp;&amp; \
mtd verify /dev/$(grep bank_1 /proc/mtd | cut -d: -f1) bank_2 || \
{ <span class="hljs-built_in">echo</span> Clone verification failed, retry; <span class="hljs-built_in">exit</span>; } }
<span class="hljs-comment"># Make a temp copy of overlay for booted firmware</span>
cp -rf /overlay/$(cat /proc/banktable/booted) /tmp/bank_overlay_backup
<span class="hljs-comment"># Clean up jffs2 space by removing existing old overlays</span>
rm -rf /overlay/*
<span class="hljs-comment"># Use the previously made temp copy as overlay for bank_2</span>
cp -rf /tmp/bank_overlay_backup /overlay/bank_2
<span class="hljs-comment"># Activate bank_1</span>
<span class="hljs-built_in">echo</span> bank_1 &gt; /proc/banktable/active
<span class="hljs-comment"># Make sure above changes get written to flash</span>
sync
<span class="hljs-comment"># Erase firmware in bank_1</span>
mtd erase bank_1;
<span class="hljs-comment"># Emulate system crash to hard reboot</span>
<span class="hljs-built_in">echo</span> c &gt; /proc/sysrq-trigger; }
<span class="hljs-comment"># end</span>
</div></code></pre>
<ul>
<li>Run the following command to make it executable
<ul>
<li><code>chmod +x script.sh</code></li>
</ul>
</li>
<li>Run the new script
<ul>
<li><code>./script.sh</code></li>
</ul>
</li>
</ul>
<hr>
<h2 id="guide---part-3">GUIDE - PART 3</h2>
<ul>
<li>Now we can proceed with the firmware upgrade to return to version 2.3.3</li>
<li>Open WinSCP (or similar software) and connect with SCP protocol to the router with <code>root/root</code> credentials</li>
<li>Upload the <code>AGTHP_2.3.3_CLOSED.rbi</code> file inside the <code>/tmp</code> router directory and rename it in <code>new.rbi</code></li>
<li>Run the following command from the shell
<ul>
<li><code>cat &quot;/tmp/new.rbi&quot; | (bli_parser &amp;&amp; echo &quot;Please wait...&quot; &amp;&amp; (bli_unseal | dd bs=4 skip=1 seek=1 of=&quot;/tmp/new.bin&quot;))</code></li>
</ul>
</li>
<li>It's necessary to proceed with a clean-up of files and configurations</li>
<li>Create a backup with the following command and save it on your PC via WinSCP
<ul>
<li><code>tar -C /overlay -cz -f /tmp/backup-$(date -I).tar.gz $(cat /proc/banktable/booted)</code></li>
</ul>
</li>
<li>Run the following command to completely clear the currently booted bank overlay
<ul>
<li><code>rm -rf /overlay/$(cat /proc/banktable/booted)</code></li>
</ul>
</li>
<li>If you change the firmware version, the root may be lost. DO NOT restart and then proceed to the next step</li>
</ul>
<h3 id="preserving-root-access">PRESERVING ROOT ACCESS</h3>
<ul>
<li>Run the following block of commands via SSH to prepare a script that will only need to be run once on next boot to grant root access</li>
</ul>
<blockquote>
<p>COPY AND PASTE INTO THE TERMINAL. PRESS ENTER TO EXECUTE THE LAST COMMAND.</p>
</blockquote>
<pre class="hljs"><code><div>mkdir -p /overlay/$(cat /proc/banktable/booted)/etc
chmod 755 /overlay/$(cat /proc/banktable/booted) /overlay/$(cat /proc/banktable/booted)/etc
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"echo root:root | chpasswd
sed -i 's#/root:.*\$#/root:/bin/ash#' /etc/passwd
sed -i -e 's/#//' -e 's#askconsole:.*\$#askconsole:/bin/ash#' /etc/inittab
uci -q set \$(uci show firewall | grep -m 1 \$(fw3 -q print | \
egrep 'iptables -t filter -A zone_lan_input -p tcp -m tcp --dport 22 -m comment --comment \"!fw3: .+\" -j DROP' | \
sed -n -e 's/^iptables.\+fw3: \(.\+\)\".\+/\1/p') | \
sed -n -e \"s/\(.\+\).name='.\+'$/\1/p\").target='ACCEPT'
uci add dropbear dropbear
uci rename dropbear.@dropbear[-1]=afg
uci set dropbear.afg.enable='1'
uci set dropbear.afg.Interface='lan'
uci set dropbear.afg.Port='22'
uci set dropbear.afg.IdleTimeout='600'
uci set dropbear.afg.PasswordAuth='on'
uci set dropbear.afg.RootPasswordAuth='on'
uci set dropbear.afg.RootLogin='1'
uci set dropbear.lan.enable='0'
uci commit dropbear
/etc/init.d/dropbear enable
/etc/init.d/dropbear restart
rm /overlay/\$(cat /proc/banktable/booted)/etc/rc.local
source /rom/etc/rc.local
"</span> &gt; /overlay/$(cat /proc/banktable/booted)/etc/rc.local
chmod +x /overlay/$(cat /proc/banktable/booted)/etc/rc.local
sync
</div></code></pre>
<ul>
<li>If the root password has been changed, it will be reset to <code>root/root</code></li>
<li>The gateway is now clean. Root access via SSH will be enabled again permanently on the next boot</li>
</ul>
<h3 id="flashing-firmware">FLASHING FIRMWARE</h3>
<ul>
<li>Run the following commands one at a time to write the <code>/tmp/new.bin</code> file to the booted bank and to cause a hard reboot
<ul>
<li><code>mtd -e $(cat /proc/banktable/booted) write &quot;/tmp/new.bin&quot; $(cat /proc/banktable/booted)</code></li>
<li><code>echo c &gt; /proc/sysrq-trigger</code></li>
</ul>
</li>
</ul>
<h3 id="hardening-gained-access">HARDENING GAINED ACCESS</h3>
<ul>
<li>Run the following in the SSH terminal to prevent your Gateway loosing root access unexpectedly</li>
</ul>
<blockquote>
<p>COPY AND PASTE INTO THE TERMINAL. PRESS ENTER TO EXECUTE THE LAST COMMAND.</p>
</blockquote>
<pre class="hljs"><code><div><span class="hljs-comment"># Disable CWMP</span>
uci delete cwmpd.cwmpd_config
uci delete firewall.cwmpd
uci del_list watchdog.@watchdog[0].pidfile=<span class="hljs-string">'/var/run/cwmpd.pid'</span>
uci del_list watchdog.@watchdog[0].pidfile=<span class="hljs-string">'/var/run/cwmpevents.pid'</span>
uci commit
/etc/init.d/watchdog-tch reload
/etc/init.d/cwmpd <span class="hljs-built_in">disable</span>
/etc/init.d/cwmpd stop
/etc/init.d/cwmpdboot <span class="hljs-built_in">disable</span>
/etc/init.d/cwmpdboot stop
/etc/init.d/zkernelpanic <span class="hljs-built_in">disable</span>
/etc/init.d/zkernelpanic stop

<span class="hljs-comment"># Disable CWMP - extra, in case you think it may resurrect</span>
uci <span class="hljs-built_in">set</span> cwmpd.cwmpd_config.state=0
uci <span class="hljs-built_in">set</span> cwmpd.cwmpd_config.acs_url=<span class="hljs-string">'https://127.0.1.1:7547/'</span>
uci <span class="hljs-built_in">set</span> cwmpd.cwmpd_config.use_dhcp=0
uci <span class="hljs-built_in">set</span> cwmpd.cwmpd_config.interface=loopback
uci <span class="hljs-built_in">set</span> cwmpd.cwmpd_config.enforce_https=1
uci commit cwmpd

<span class="hljs-comment"># Disable Telstra monitoring</span>
uci delete tls-vsparc.Config
uci delete tls-vsparc.Passive
uci delete autoreset.vsparc_enabled
uci delete autoreset.thor_enabled
uci delete wifi_doctor_agent.acs
uci delete wifi_doctor_agent.config
uci delete wifi_doctor_agent.as_config
uci commit

<span class="hljs-comment"># Disable Telstra Air/Fon WiFi</span>
/etc/init.d/hotspotd stop
/etc/init.d/hotspotd <span class="hljs-built_in">disable</span>
uci delete dhcp.hotspot
uci delete dhcp.fonopen
uci commit

<span class="hljs-comment"># Remove any default SSH pubkey</span>
<span class="hljs-built_in">echo</span> &gt; /etc/dropbear/authorized_keys
<span class="hljs-comment"># Disable SSH access over wan</span>
uci <span class="hljs-built_in">set</span> dropbear.wan.enable=<span class="hljs-string">'0'</span>
uci commit dropbear

<span class="hljs-comment"># Free space for gateways with small flash</span>
find /rom/usr/lib/ipk -<span class="hljs-built_in">type</span> f |xargs -n1 basename | cut -f 1 -d <span class="hljs-string">'_'</span> |xargs opkg --force-removal-of-dependent-packages remove
</div></code></pre>
<ul>
<li>If you get one or more error messages from running these commands, you can ignore them: it means the command was not needed for your firmware version</li>
</ul>
<h3 id="gui-ansuel">GUI ANSUEL</h3>
<ul>
<li>Connect with WinSCP to the router as described above</li>
<li>Copy the <code>GUI.tar.bz2</code> file to the <code>/tmp</code> directory</li>
<li>Connect in SSH to the router with root user</li>
<li>Run the following command to extract the GUI
<ul>
<li><code>bzcat /tmp/GUI.tar.bz2 | tar -C / -xvf - &amp;&amp; /etc/init.d/rootdevice force</code></li>
</ul>
</li>
<li>Wait until the procedure is finished. If necessary, the router may reboot itself. Ignore the latest error messages</li>
<li>In case of <em>Error 9</em> restart the router and the problem will be solved</li>
</ul>
<h3 id="change-root-and-gui-password">CHANGE ROOT AND GUI PASSWORD</h3>
<ul>
<li>Run the <code>passwd</code> command in the terminal to change the login password for the root user. This procedure is strongly recommended</li>
<li>Once the Ansuel GUI is installed, the username and password will be <code>admin/admin</code> again. It is also reccomended to change this password in order to prevent unauthorized access to the administration web page. To do this, after after you log into the web GUI, click on the <em>Advanced</em> button at the top right next to the username <em>admin</em> and then on <em>Profile settings</em></li>
</ul>
<h3 id="result">RESULT</h3>
<p>Now you have a TIM HUB DGA4132 modem router updated to AGTHP version 2.3.3 with root permissions enabled and the Ansuel GUI.</p>

</body>
</html>
